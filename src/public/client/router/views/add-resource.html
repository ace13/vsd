<script type="text/ng-template" id="resource-route.html">
  <span>{{ route.url }}</a>
  <ul ng-if="route.hasChildren">
    <li ng-repeat="route in route.children" ng-include="'resource-route.html'">
    </li>
  <ul>
</script>

<div class="modal-header">
  <h3 class="modal-title">Add Resource</h3>
</div>
<div class="modal-body">

  <form class="form-horizontal">

    <!-- Resource Name -->
    <div class="form-group form-group-sm">
      <label for="name" class="col-sm-2 control-label">Name</label>
      <div class="col-sm-10">
        <input type="text" id="name" ng-model="model.name" class="form-control" focus="true" required ng-pattern1="model.pathRegexValidate" />
        <div class="help-block">{{ model.url }}</div>
      </div>
    </div>

    <div ng-if="model.name">
      <p class="lead">The following will be added to the model:</p>
      <div class="table-responsive">
        <table class="table table-condensed table-striped" style="max-width: 100%; overflow-y: auto;">
          <tr ng-repeat="action in model.actions">
            <td>
              <input type="checkbox" checked/>
            </td>
            <td>{{ action.verb.toUpperCase() }}</td>
            <td>{{ action.route.url }}</td>
            <td>&rarr;</td>
            <td>{{ model.controller.name }}.{{ action.handlers[0].name }}</td>
          </tr>
        </table>
      </div>

      <p class="lead">By adding:</p>
      <div class="row">
        <div class="col-sm-6">
          <h5>Controller: {{ model.controller.name }}</h5>
          <ul>
            <li ng-repeat="handler in model.controller.handlers">
              &rarr;&nbsp;{{ handler.name }}
            </li>
          </ul>
        </div>

        <div class="row col-sm-6">
          <h5>Route: {{ model.route.name }}</h5>
          <ul>
            <li ng-repeat="route in [model.route]" ng-include="'resource-route.html'">
            </li>
          </ul>
        </div>
      </div>

    </div>

  </form>
</div>
<div class="modal-footer">
  <button class="btn btn-secondary" ng-click="cancel()">Cancel</button>
  <button class="btn btn-primary" ng-click="ok()">OK</button>
</div>
